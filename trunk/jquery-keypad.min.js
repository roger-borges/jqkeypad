(function (a) { var b = { init: function (b) { return this.each(function () { var c = a(this), d = c.data("jqKeyPad"), e = a("<div />", { text: c.attr("title") }); if (!d) { a(this).data("jqKeyPad", { target: c, jqKeyPad: e }); var f = { 8: "backspace", 9: "tab", 13: "enter", 16: "shift", 17: "ctrl", 18: "alt", 19: "pause/break", 20: "capslock", 27: "escape", 32: "space", 33: "pageup", 34: "pagedown", 35: "end", 36: "home", 37: "leftarrow", 38: "uparrow", 39: "rightarrow", 40: "downarrow", 45: "insert", 46: "delete", 91: "windowleft", 92: "windowright", 93: "select", 144: "numlock", 145: "scrolllock" }; c.data("specialCharMap", f); b = a.extend({ mode: "numeric", precision: 2, keyPadToShowOnShift: null, keyPadToShowOnUnshift: null, initialKeyPad: null, onButtonCommand: null, onSpecialKeyDown: null, specialKeyCombos: null, onSpecialKeyCombo: null, captureDocumentKeyPress: true, focusOnLoad: false, pasteAllowed: true }, b); var g = c.attr("mode"); if (g == "numeric" || g == "alphanumeric" || g == "incognito") { b.mode = g } if (b.mode == "numeric") { var h = parseInt(c.attr("precision")); if (!isNaN(h) && h > 0) { b.precision = h } } var i = c.attr("initialKeyPad"); if (i != null && i != "") { b.initialKeyPad = i } if (b.mode == "incognito") { var j = a(this).children("ul").hide() } else if (b.initialKeyPad == "" || b.initialKeyPad === undefined) { var j = a(this).children("ul").hide(); var j = a(this).children("ul")[0].show() } else { var k = false; a(this).children("ul").each(function () { var c = a(this).attr("KeyPadName"); if (c == b.initialKeyPad) { a(this).show(); k = true } else { a(this).hide() } }); if (k == false) { var j = a(this).children("ul")[0].show() } } if (b.focusOnLoad == true) { a("#txtEnteredValue").focus() } c.data("options", b); if (c.children("#txtEnteredValue").val() != "") { c.data("currentValue", c.children("#txtEnteredValue").val()) } var l = function (b) { if (a(b).is("input") == false) { a(b).attr("unselectable", "on").css("-webkit-touch-callout", "none").css("-webkit-user-select", "none").css("-khtml-user-select", "none").css("-moz-user-select", "none").css("-ms-user-select", "none").css("user-select", "none"); a(b).children().each(function () { l(a(this)) }) } }; l(a(this)); a(this).children("ul").children("li").bind("click.jqKeyPad", function () { var d = true; if (b.onButtonCommand != null) { var e = a(this).attr("commandName"); var f = true; if (e === undefined) { f = false } if (f == true) { var g = a(this).attr("commandArgument"); if (e == "ShowPad") { c.jqKeyPad("ShowKeyPad", g) } else { var h = a(this).attr("value"); var i = b.onButtonCommand({ command: e, argument: g, value: h }); if (i == false) { d = false } } } } if (d == true) { if (b.mode == "numeric") { var j = String(a(this).attr("val")); if (j != null && !(j === "undefined")) { var k = j; var l = c.data("currentValue"); if (l == null) { l = k } else if (k == ".") { l = l.toString(); if (l.indexOf(k) == -1) { l = l + k } } else { l = l.toString(); if (l.indexOf(".") == -1) { l = l + k } else { var m = l.indexOf("."); var n = l.substring(m); if (n.length <= b.precision) { l = l + k } } } c.data("currentValue", l); c.children("#txtEnteredValue").val(c.data("currentValue")) } } else { var j = String(a(this).attr("val")); var o = -1; if (j != null && !(j === "undefined")) { var k = j; var l = c.data("currentValue"); if (l == null) { l = k } else { var p = c.children("#txtEnteredValue").val(); if (p != l) { l = p } var q = ""; var r = ""; var s = ""; if (a(c).children("#txtEnteredValue").first().is(":focus")) { var t = c.children("#txtEnteredValue")[0]; var u = t.selectionStart; var v = t.selectionEnd; q = l.substring(0, u); r = l.substr(u, v); s = l.substr(v); var w = q + k + s; l = w; o = u } else { l += k } } c.data("currentValue", l); c.children("#txtEnteredValue").val(c.data("currentValue")); if (o >= 0) { var x = function (a, b) { var c = document.getElementById(a); if (c != null) { if (c.createTextRange) { var d = c.createTextRange(); d.move("character", b); d.select() } else { if (c.selectionStart) { c.focus(); c.setSelectionRange(b, b) } else c.focus() } } }; x("txtEnteredValue", o + 1) } } } } }); a(this).children("ul").children("li.reset").bind("click.jqKeyPad", function () { c.data("currentValue", null); c.children("#txtEnteredValue").val("") }); a(this).children("ul").children("li.back").bind("click.jqKeyPad", function () { var a = c.data("currentValue"); if (a != null && a != "") { a = a.substring(0, a.length - 1); c.data("currentValue", a); c.children("#txtEnteredValue").val(a) } }); if (b.captureDocumentKeyPress) { a(document).bind("keyup.jqKeyPad", function (b) { if (b.keyCode == "16" && c.data("isShift") == true) { c.data("isShift", false); var d = c.data("options").keyPadToShowOnUnshift; if (d != null && d !== undefined) { c.children("ul").each(function () { var b = a(this).attr("KeyPadName"); if (c.data("options").mode == "incognito") { } else if (b == d) { a(this).show() } else { a(this).hide() } }) } } if (f[b.keyCode] !== undefined) { c.data("is" + b.keyCode, false) } }); a(document).bind("keydown.jqKeyPad", function (d) { if (d.shiftKey == true) { var e = c.data("options").keyPadToShowOnShift; if (e != null && e !== undefined) { c.children("ul").each(function () { var b = a(this).attr("KeyPadName"); if (c.data("options").mode == "incognito") { } else if (b == e) { a(this).show(); c.data("isShift", true) } else { a(this).hide() } }) } } if (f[d.keyCode] !== undefined) { if (c.data("is" + d.keyCode) != true) { c.data("is" + d.keyCode, true); if (c.data("specialCharMap")[d.keyCode] !== undefined) { isSpecialCharacter = true; specialValue = c.data("specialCharMap")[d.keyCode] } var g = null; a(c).children("ul").children("li").each(function () { var b = a(this).attr("specialVal"); if (specialValue == b) { if (a(this).parent().is(":visible")) { g = a(this); return false } else if (g == null) { g = a(this) } } }); if (g != null) { var h = a(g).attr("commandName"); if (h != null && h != undefined && h != "") { a(g).click() } } if (b.onSpecialKeyDown != null) { b.onSpecialKeyDown({ keyCode: d.keyCode, key: f[d.keyCode] }) } } } }); a(document).bind("keypress.jqKeyPad", function (d) { var e = String.fromCharCode(d.keyCode ? d.keyCode : d.which); var f = true; if (b.onSpecialKeyCombo != null) { var g; for (g in b.specialKeyCombos) { if (e == b.specialKeyCombos[g]) { if (c.jqKeyPad("IsSpecialKeyDown", g) == true) { if (b.onSpecialKeyCombo({ specialKey: g, regularKey: e }) == false) { f = false } } } } } var h = c.data("specialCharMap"); var i; for (i in h) { if (i == d.keyCode && d.charCode == "0") { return true } } if (f) { a(c).children("ul").children("li").each(function () { var b = a(this).attr("val"); if (b != null && b == e) { a(this).click(); return false } }) } if (a("#txtEnteredValue").is(":focus") == true) { return false } }) } else { a("#txtEnteredValue").bind("keyup.jqKeyPad", function (b) { if (b.keyCode == "16" && c.data("isShift") == true) { c.data("isShift", false); var d = c.data("options").keyPadToShowOnUnshift; if (d != null && d !== undefined) { c.children("ul").each(function () { var b = a(this).attr("KeyPadName"); if (c.data("options").mode == "incognito") { } else if (b == d) { a(this).show() } else { a(this).hide() } }) } } if (f[b.keyCode] !== undefined) { c.data("is" + b.keyCode, false) } }); a("#txtEnteredValue").bind("keydown.jqKeyPad", function (d) { if (d.shiftKey == true) { var e = c.data("options").keyPadToShowOnShift; if (e != null && e !== undefined) { c.children("ul").each(function () { var b = a(this).attr("KeyPadName"); if (c.data("options").mode == "incognito") { } else if (b == e) { a(this).show(); c.data("isShift", true) } else { a(this).hide() } }) } } if (f[d.keyCode] !== undefined) { if (c.data("is" + d.keyCode) != true) { c.data("is" + d.keyCode, true); if (c.data("specialCharMap")[d.keyCode] !== undefined) { isSpecialCharacter = true; specialValue = c.data("specialCharMap")[d.keyCode] } var g = null; a(c).children("ul").children("li").each(function () { var b = a(this).attr("specialVal"); if (specialValue == b) { if (a(this).parent().is(":visible")) { g = a(this); return false } else if (g == null) { g = a(this) } } }); if (g != null) { var h = a(g).attr("commandName"); if (h != null && h != undefined && h != "") { a(g).click() } } if (b.onSpecialKeyDown != null) { b.onSpecialKeyDown({ keyCode: d.keyCode, key: f[d.keyCode] }) } } } }); a("#txtEnteredValue").bind("keypress.jqKeyPad", function (b) { var d = c.data("specialCharMap"); var e; for (e in d) { if (e == b.keyCode && b.charCode == "0") { return true } } var f = String.fromCharCode(b.keyCode); var g = false; a(c).children("ul").children("li").each(function () { var b = a(this).attr("val"); if (b != null && b == f) { a(this).click(); g = true; return false } }); if (a("#txtEnteredValue").is(":focus") == true) { return false } }) } a("#txtEnteredValue").bind("paste.jqKeyPad", function (a) { return b.pasteAllowed }) } }) }, destroy: function () { return this.each(function () { var b = a(this), c = b.data("jqKeyPad"); a(window).unbind(".jqKeyPad"); c.jqKeyPad.remove(); b.removeData("jqKeyPad") }) }, GetValue: function () { var b = a(this).data("currentValue"); if (b === undefined) { return "" } else { return b } }, ClearValue: function () { var b = a(this); b.data("currentValue", ""); b.children("#txtEnteredValue").val("") }, ShowKeyPad: function (b) { var c = a(this); var d = false; c.children("ul").each(function () { if (c.data("options").mode == "incognito") { return } else var e = a(this).attr("KeyPadName"); if (e == b) { a(this).show(); d = true } else { a(this).hide() } }); if (d == false) { var e = a(this).children("ul")[0].show() } }, IsSpecialKeyDown: function (b) { var c = a(this); var d = c.data("specialCharMap"); for (var e in d) { if (d[e] == b) { if (c.data("is" + e) == true) { return true } else { return false } } } }, Focus: function () { a("#txtEnteredValue").focus() } }; a.fn.jqKeyPad = function (c) { if (b[c]) { return b[c].apply(this, Array.prototype.slice.call(arguments, 1)) } else if (typeof c === "object" || !c) { return b.init.apply(this, arguments) } else { a.error("Method " + c + " does not exist on jQuery.jqKeyPad") } } })(jQuery)